(function(e){function t(t){for(var n,o,a=t[0],l=t[1],c=t[2],p=0,u=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},s=[];function o(e){return a.p+"js/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-2d213e8b":"dff9344f","polyfills-core-js":"7bd4d66d","polyfills-dom":"e5851423"}[e]+".js"}function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],i=r[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,n){i=r[e]=[t,n]}));t.push(i[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=o(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(p);var i=r[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",c.name="ChunkLoadError",c.type=n,c.request=s,i[1](c)}r[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/archi2D/",a.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var d=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"30ec":function(e,t,i){},"38aa":function(e,t,i){"use strict";i("f95a")},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),r=i("dc42"),s=i("6018"),o=(i("1d15"),function(){var e=this,t=e._self._c;return t("Archi2D")}),a=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"App"},[t("div",{staticStyle:{padding:"5px","z-index":"9999","box-shadow":"inset 0 0 0 2px #ccc","border-radius":"4px","background-color":"#fff",position:"absolute",visibility:"hidden"},attrs:{id:"TooltipPhaser"}},[t("ion-phaser",{domProps:{game:e.previewItem}})],1),t("div",{attrs:{id:"toolbox"}},[t("div",{staticClass:"margin-bottom"}),t("div",{staticClass:"neumorphism"},[t("div",{staticStyle:{float:"left"},on:{click:function(t){return e.showLayers()}}},[t("label",{attrs:{slot:"extra-label"},slot:"extra-label"},[e._v("\n\t\t\t\t\tShow Layers\n\t\t\t\t")]),t("pretty-checkbox-vue",{staticClass:"p-icon p-plain",attrs:{toggle:"",color:"success-o"},model:{value:e.displayLayers,callback:function(t){e.displayLayers=t},expression:"displayLayers"}},[t("i",{staticClass:"icon mdi mdi-eye",staticStyle:{"font-size":"15px",top:"-3px",left:"5px"},attrs:{slot:"extra"},slot:"extra"}),t("i",{staticClass:"icon mdi mdi-eye-off",staticStyle:{"font-size":"15px",top:"-3px",left:"5px"},attrs:{slot:"off-extra"},slot:"off-extra"})])],1),t("div",[t("pretty-checkbox-vue",{staticClass:"p-icon p-plain",staticStyle:{float:"right"},attrs:{"off-color":"warning-o",toggle:""},on:{change:function(t){return e.changeDesignMode()}}},[e._v("\n\t\t\t\t\tPause\n\t\t\t\t\t"),t("i",{staticClass:"icon mdi mdi-pause",staticStyle:{left:"-10px","font-size":"25px",top:"-9px"},attrs:{slot:"extra"},slot:"extra"}),t("label",{attrs:{slot:"off-label"},slot:"off-label"},[e._v("\n\t\t\t\t\t\tPlay\n\t\t\t\t\t")]),t("i",{staticClass:"icon mdi mdi-play",staticStyle:{left:"-10px","font-size":"25px",top:"-9px"},attrs:{slot:"off-extra"},slot:"off-extra"})])],1),t("br")]),t("br"),t("div",{staticClass:"neumorphism"},[t("div",{staticStyle:{"text-align":"left"}},[t("span",{staticStyle:{"margin-right":"15px"}},[e._v("Name :")]),t("input",{staticStyle:{width:"119px","margin-right":"15px"}}),t("pretty-checkbox-vue",{staticClass:"p-icon p-curve p-pulse p-thick",staticStyle:{top:"-1px"},attrs:{toggle:""},on:{change:function(t){return e.setFlipX()}},model:{value:e.flipX,callback:function(t){e.flipX=t},expression:"flipX"}},[t("i",{staticClass:"icon mdi mdi-checkbox-marked",staticStyle:{"font-size":"16px",top:"-3px",left:"-3px"},attrs:{slot:"extra"},slot:"extra"}),e._v("\n\t\t\t\t\tFlipX\n\t\t\t\t\t"),t("i",{staticClass:"icon mdi mdi-checkbox-unmarked",staticStyle:{"font-size":"16px",top:"-3px",left:"-3px"},attrs:{slot:"off-extra"},slot:"off-extra"}),t("label",{attrs:{slot:"off-label"},slot:"off-label"},[e._v("\n\t\t\t\t\tFlipX\n\t\t\t\t\t")])])],1),t("br"),t("div",[t("compact-picker",{attrs:{value:e.colors,"preset-colors":["#000","#AAA","#BBB","#CCC","#DDD","#EEE","#FFF"]},on:{input:e.changeColor}})],1),t("br"),t("div",{staticClass:"vue-slider"},[t("div",{staticStyle:{"margin-right":"5px","margin-top":"1px"}},[e._v("Opacity :")]),t("vue-slider",{attrs:{tooltip:"none",dotSize:8,height:2,min:e.opacityMin,max:e.opacityMax,duration:.5},on:{change:function(t){return e.setOpacity()},error:function(t){return e.opacityError()}},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}}),e._v("\n\t\t\t\t  \n\t\t\t\t"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.opacity,expression:"opacity"}],staticStyle:{width:"25px"},domProps:{value:e.opacity},on:{input:function(t){t.target.composing||(e.opacity=t.target.value)}}}),e._v(" %\n\t\t\t\t"),t("br")],1),t("span",{staticClass:"error"},[e._v(e._s(e.opacityErrorMsg))])]),t("br"),t("br"),t("div",{staticClass:"wrapperGridItems"},e._l(e.pngItems,(function(i,n){return t("drag",{key:i,staticStyle:{width:"60px",height:"60px"},attrs:{"drag-image-opacity":.5,"go-back":!0,data:i,type:"string"},on:{dragstart:function(t){e.toolbox_dragStart(e.getPngFile(i))},dragend:function(t){e.toolbox_dragEnd(e.getPngFile(i))}},scopedSlots:e._u([{key:"drag-image",fn:function(){return[t("div",{staticStyle:{background:"white",border:"1px solid black",transform:"translate(-50%, -50%)"}},[t("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.getPngFile(i)}})])]},proxy:!0}],null,!0)},[t("img",{ref:"pngFile",refInFor:!0,staticStyle:{background:"white",border:"1px solid black",width:"60px",height:"60px",padding:"2px"},attrs:{id:i,src:e.getPngFile(i)},on:{mouseenter:function(t){return e.showToolTipPhaser(n)},mouseleave:function(t){return e.hideToolTipPhaser()}}})])})),1),t("br"),t("NumberInputSpinner",{attrs:{value:"0",min:-100,max:900,step:10,integerOnly:!1},model:{value:e.scale_Sprite,callback:function(t){e.scale_Sprite=t},expression:"scale_Sprite"}}),t("br"),t("br"),t("br"),t("br"),t("div",{on:{click:function(t){return e.initRecord()}}},[e._v("Record(10s)")]),t("br"),t("br"),t("br"),t("br"),t("div",{on:{click:function(t){return e.changeFullscreen()}}},[t("pretty-checkbox-vue",{staticClass:"p-icon p-plain",attrs:{toggle:""}},[t("i",{staticClass:"icon mdi mdi-fullscreen",staticStyle:{color:"black","font-size":"20px",top:"-7px",left:"2px","padding-right":"13px"},attrs:{slot:"extra"},slot:"extra"}),e._v("\n\t\t\t\tFullscreen\n\t\t\t\t"),t("i",{staticClass:"icon mdi mdi-fullscreen",staticStyle:{color:"black","font-size":"20px",top:"-7px",left:"2px","padding-right":"13px"},attrs:{slot:"off-extra"},slot:"off-extra"}),t("label",{attrs:{slot:"off-label"},slot:"off-label"},[e._v("\n\t\t\t\tFullscreen\n\t\t\t\t")])])],1),t("br"),t("pretty-checkbox-vue",{staticClass:"p-icon p-curve p-pulse p-thick",staticStyle:{top:"-1px"},on:{click:function(t){return e.DebugMode()}},model:{value:e.debug,callback:function(t){e.debug=t},expression:"debug"}},[t("i",{staticClass:"icon mdi mdi-checkbox-marked",staticStyle:{"font-size":"16px",top:"-3px",left:"-3px"},attrs:{slot:"extra"},slot:"extra"}),e._v("\n\t\t\tDebug\n\t\t\t"),t("i",{staticClass:"icon mdi mdi-checkbox-unmarked",staticStyle:{"font-size":"16px",top:"-3px",left:"-3px"},attrs:{slot:"off-extra"},slot:"off-extra"}),t("label",{attrs:{slot:"off-label"},slot:"off-label"},[e._v("\n\t\t\tDebug\n\t\t\t")])]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")],1),t("div",{attrs:{id:"wrapper-phaser"}},[t("drop",{attrs:{"accepts-type":"string"},on:{drop:function(t){return e.PhaserDropped()},mousemove:function(t){return e.moveOnCanvas()},mouseleave:function(t){return e.leaveCanvas()}},scopedSlots:e._u([{key:"drag-image",fn:function(){},proxy:!0}])},[t("div",{attrs:{id:"center-phaser"}},[t("ion-phaser",{domProps:{game:e.game}})],1)])],1),t("video",{attrs:{autoplay:"",hidden:"true",id:"video",width:"320",height:"240",controls:""}})])},c=[],p=(i("6762"),i("2fdb"),i("14b9"),i("ac6a"),i("c5f6"),i("d4ef")),d=i.n(p),u=i("2624"),f=i.n(u),h=i("1fb0"),g=i.n(h),m=(i("24df"),i("4971")),y=i.n(m),x=i("c345"),v=i("fdcb");i("6b54"),i("a481");function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)}))}function w(e,t,i,n,r,s,o,a){var l,c,p;e.beginPath();var d=0,u=0;if(a>0){var f=(s+o)*a;f<s?d=s-f:u=o-(f-s)}var h=[];for(l=0;l<t.length;l++){var g={x:t[l].x,y:t[l].y},m=Math.cos(r),y=Math.sin(r),x=g.x,v=g.y;g.x=x*m-v*y,g.y=x*y+v*m,h.push(g)}for(l=0;l<h.length;l++){c=h[l],p=l==h.length-1?h[0]:h[l+1];var b=p.x-c.x,w=p.y-c.y,D=Math.sqrt(b*b+w*w),M={x:b/D,y:w/D},I=0;e.moveTo(i+c.x+u*M.x,n+c.y+u*M.y);while(I<=D)I+=u,I+=d>0?d:s,I>D?(d=I-D,I=D):d=0,e.lineTo(i+c.x+I*M.x,n+c.y+I*M.y),I+=o,I>D&&0==d?u=I-D:(u=0,e.moveTo(i+c.x+I*M.x,n+c.y+I*M.y))}e.closePath(),e.strokePath()}function D(e,t,i,n,r){var s=16,o=3,a=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),l=Math.atan2(o,s),c=Math.abs(t-n),p=Math.abs(i-r),d=Math.atan2(p,c),u=Math.cos(d+l)*a,f=Math.sin(d+l)*a,h=Math.cos(d-l)*a,g=Math.sin(d-l)*a;e.beginPath(),t<n&&i>r||t<n&&i==r||t==n&&i>r?(e.moveTo(n-u,r+f),e.lineTo(n,r),e.lineTo(n-h,r+g)):t>n&&i>r||t>n&&i==r?(e.moveTo(n+u,r+f),e.lineTo(n,r),e.lineTo(n+h,r+g)):t<n&&i<r?(e.moveTo(n-u,r-f),e.lineTo(n,r),e.lineTo(n-h,r-g)):(t>n&&i<r||t==n&&i<r)&&(e.moveTo(n+u,r-f),e.lineTo(n,r),e.lineTo(n+h,r-g)),e.stroke()}function M(e,t,i,n,r,s){e.beginPath(),s||(s=[10,5]),0==f&&(f=.001);var o=s.length;e.moveTo(t,i);var a=n-t,l=r-i,c=a?l/a:1e15,p=Math.sqrt(a*a+l*l),d=0,u=!0;while(p>=.1){var f=s[d++%o];f>p&&(f=p);var h=Math.sqrt(f*f/(1+c*c));a<0&&(h=-h),t+=h,i+=c*h,u?e.lineTo(t,i):e.moveTo(t,i),p-=f,u=!u}e.stroke()}var I=0,S=0;document.querySelector("body").onmousemove=function(e){I=e.x,S=e.y};var _={VALUE:1,INTERVAL:2,MIN:3,MAX:4,ORDER:5},k={project:"Projet_1",mp4_duration:1e4,resources:[{GUID:"001b",id:"background",type:"image",src:"user_download/COUPE1-1024x764.png"},{GUID:"002c",id:"man_idle",type:"spritesheet",src:"fixed/man_idle_68x150.png",frameWidth:68,frameHeight:150},{GUID:"003d",id:"man04",type:"spritesheet",src:"animated/man04_78x150.png",frameWidth:78,frameHeight:150}],items:[{GUID:"084f-4177-ad78-e11ae75eeeee",id:"man_idle",x:255,y:291,tint:0,alpha:.7,flipX:!0,scale:.35,tween:{x1:255,y1:291,duration:13e3,flipX:!1,yoyo:!1,repeat:-1}},{GUID:"084f-4177-ad78-e11ae75ddddd",id:"man_idle",x:230,y:600,tint:0,alpha:.9,flipX:!1,scale:.8,tween:{x1:230,y1:600,duration:13e3,flipX:!1,yoyo:!1,repeat:-1}},{GUID:"084f-4177-ad78-e11ae75ccccc",id:"man04",x:470,y:587,tint:0,alpha:.5,flipX:!0,scale:.35,tween:{x1:200,y1:587,duration:13e3,flipX:!0,yoyo:!0,repeat:-1}},{GUID:"084f-4177-ad78-e11ae75fffff",id:"man04",x:150,y:587,tint:0,alpha:.8,flipX:!1,scale:.4,tween:{x1:600,y1:587,duration:14e3,flipX:!0,yoyo:!0,repeat:-1}},{GUID:"084f-4177-ad78-e11ae75ggggg",id:"man04",x:706,y:87,tint:0,alpha:1,flipX:!0,scale:.4,tween:{x1:370,y1:87,duration:18e3,flipX:!0,yoyo:!0,repeat:-1}}],layers:[{name:"Layer_1",invertAlpha:!1,color:"0x77B5FE",zones:[{id:"Bloc Electrique",coords:[210,0,255,0,255,350,210,350]}]},{name:"Layer_2",invertAlpha:!0,color:"0xFFA500",zones:[{id:"Terrasse",coords:[190,100,698,100,698,130,190,130]},{id:"Garage",coords:[502,30,604,30,604,110,502,110]},{id:"Sous-Sol",coords:[387,550,490,550,490,615,387,615]}]}]},F=0,A=[],T=[],O=[],C=[],G=[],P=[],U=[],R=[],E=[],X=[],B=null,L=[],H=[],N=[],j=!1,z={name:"Archi2D",components:{"vue-slider":y.a,"compact-picker":x["Compact"],"pretty-checkbox-vue":f.a,NumberInputSpinner:g.a,Drag:v["a"],Drop:v["b"]},data:function(){return{pngItems:["animated/man04_78x150_thumb.png","fixed/man_idle_68x150_thumb.png"],isDnD_FromToolBox:!1,overCanvas:!1,phaserDropped:!1,designMode:!0,displayLayers:!0,sceneMouseDown:!1,spriteMouseDown:!1,spriteInSelection:!1,clone_selectionRect:null,spriteDrag:!1,isDragHandleArrow:!1,flipX:!1,opacity:0,opacityMin:0,opacityMax:100,opacityErrorMsg:"",scale_Sprite:0,colors:{hex:"#000000",source:"hex"},debug:!0,previewItem:{type:d.a.CANVAS,audio:{noAudio:!0},clearBeforeRender:!0,transparent:!1,backgroundColor:"#FFFFFF",roundPixels:!1,autoRound:!1,preserveDrawingBuffer:!1,desynchronized:!1,antialias:!0,fps:{target:30},width:150,height:150,scale:{width:150,height:150},disableContextMenu:!0,scene:{update:function(){var e=this;if(0!==N.length){this.load.crossOrigin="anonymous";var t=N[0];N=[],t=t.substring(0,t.lastIndexOf("_thumb.png"));var i=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("_")),n=t.substring(t.lastIndexOf("_")+1,t.length);t+=".png";var r=Number(n.substring(0,n.indexOf("x"))),s=Number(n.substring(n.indexOf("x")+1,n.length));this.load.on("complete",(function(){e.anims.remove("PhaserMedia_Animation");var t=e.children.list.filter((function(e){return e instanceof d.a.GameObjects.Sprite}));t.forEach((function(e){return e.destroy()})),e.anims.create({key:"PhaserMedia_Animation",frames:e.anims.generateFrameNumbers(i),frameRate:12,repeat:-1}),e.add.sprite(0,0,i).setOrigin(-.5,0).play("PhaserMedia_Animation")}),this),this.load.spritesheet(i,t,{frameWidth:r,frameHeight:s}),this.load.start()}}}},game:{type:d.a.WEBGL,audio:{noAudio:!0},resolution:window.devicePixelRatio,clearBeforeRender:!1,transparent:!1,roundPixels:!1,autoRound:!1,preserveDrawingBuffer:!1,desynchronized:!1,antialias:!0,fps:{target:60},scale:{fullscreenTarget:"wrapper-phaser",mode:d.a.Scale.FIT,autoCenter:d.a.Scale.CENTER_BOTH},parent:"center-phaser",disableContextMenu:!0,scene:{preload:function(){for(var e in this.load.crossOrigin="anonymous",this.load.spritesheet("dragArrow","assets/dragArrow.png",{frameWidth:22,frameHeight:22}),k.resources){var t=k.resources[e];switch(t.type){case"image":this.load.image(t.id,"assets/"+t.src);break;case"spritesheet":this.load.spritesheet(t.id,"assets/"+t.src,{frameWidth:t.frameWidth,frameHeight:t.frameHeight});break}}},create:function(){var e=this,t=this.time.addEvent({delay:1e3,callback:function(){F+=t.getElapsedSeconds()},callbackScope:this,loop:!0});this.background=this.add.image(512,382,"background"),this.dragArrowfixedResources=this.anims.create({key:"dragArrow",frames:this.anims.generateFrameNumbers("dragArrow"),frameRate:1,repeat:-1}),this.selection=this.add.rectangle(0,0,0,0,1929622,.5);for(var i=0;i<k.resources.length;i++){var n=k.resources[i];if("spritesheet"===n.type){var r=this.anims.create({key:n.id+"_Animation",frames:this.anims.generateFrameNumbers(n.id),frameRate:12,repeat:-1});r.GUID=n.GUID,C.push(r)}}for(var s=function(t){var i=k.items[t],n=e.add.sprite(i.x,i.y);if(n.GUID=k.items[t].GUID,n.setScale(i.scale).setAlpha(i.alpha).setTintFill(i.tint).setFlipX(i.flipX).setOrigin(.5).setInteractive({draggable:!0}).on("pointerdown",(function(){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1})).on("pointerup",(function(){B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).on("dragstart",(function(){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1})).on("drag",(function(e){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1,this.x=parseInt(e.x),this.y=parseInt(e.y),k.items[t].x=parseInt(e.x),k.items[t].y=parseInt(e.y)})).on("dragend",(function(){B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).play(i.id+"_Animation"),n.setDataEnabled(),n.data.set("id",i.id),A.push(n),k.items[t].tween){var r=e.tweens.add({targets:A[t],flipX:k.items[t].tween.flipX,yoyo:k.items[t].tween.yoyo,repeat:k.items[t].tween.repeat,props:{x:{value:{getStart:function(){return k.items[t].x},getEnd:function(){return k.items[t].tween.x1}},duration:k.items[t].tween.duration}}});r.GUID=k.items[t].GUID,G.push(r)}},o=0;o<k.items.length;o++)s(o);for(var a=0;a<k.layers.length;a++){var l=a;E.push(this.add.layer()),0===a&&E[l].add([A[0]]),1===a&&E[l].add([A[2],A[3],A[4]]),P.push(this.add.graphics()),U.push(this.make.graphics().fillStyle(0));for(var c=0;c<k.layers[a].zones.length;c++){var p=new d.a.Geom.Polygon(k.layers[a].zones[c].coords);E[l].mask=new d.a.Display.Masks.BitmapMask(this,U[l].fillPoints(p.points,!0)),E[l].mask.invertAlpha=k.layers[a].invertAlpha,R[l]=E[l].mask,E[l].clearMask(),P[l].fillStyle(k.layers[a].color,.4).lineStyle(0,k.layers[a].color).fillPoints(p.points,!0).strokePoints(p.points,!0).setVisible(!0)}}function u(e){B.sceneMouseDown=!1,B.spriteMouseDown=!1,B.isDrag=!1,B.isDragHandleArrow=!1,this.selection.x=e.x,this.selection.y=e.y}function f(){B.sceneMouseDown=!1,B.spriteMouseDown=!1,this.selection.width=0,this.selection.height=0}function h(e){if(!0!==B.isDragHandleArrow){B.spriteInSelection=!1,O=[];for(var t=0;t<T.length;t++)O.push(T[t]);if(B.spriteMouseDown&&!B.spriteDrag){B.sceneMouseDown=!1,this.selection.x=e.x,this.selection.y=e.y,this.selection.width=0,this.selection.height=0;var i=new d.a.Geom.Rectangle(e.x,e.y,0,0);if(y(i),g.bind(this),O.length>1)for(var n=0;n<O.length;n++)if(O[n].GUID===T[0].GUID){B.spriteInSelection=!0,T=[];for(var r=0;r<O.length;r++)T.push(O[r]);return y(B.clone_selectionRect),void g.bind(this)}B.spriteInSelection=!1,O=[];for(var s=0;s<T.length;s++)O.push(T[s])}else{T=[],B.sceneMouseDown=!0,this.selection.x=e.x,this.selection.y=e.y,this.selection.width=0,this.selection.height=0;var o=new d.a.Geom.Rectangle(e.x,e.y,0,0);y(o),g.bind(this)}}}function g(e){if(!0!==B.isDragHandleArrow&&(B.sceneMouseDown=!1,!B.spriteMouseDown&&e.isDown)){var t=e.x-e.prevPosition.x,i=e.y-e.prevPosition.y;this.selection.width+=t,this.selection.height+=i;var n=new d.a.Geom.Rectangle(this.selection.x,this.selection.y,this.selection.width,this.selection.height);n.width<0&&(n.x+=n.width,n.width*=-1),n.height<0&&(n.y+=n.height,n.height*=-1),B.clone_selectionRect=n,y(n)}}function m(){if(!0!==B.isDragHandleArrow){if(B.spriteInSelection=!1,this.selection.width=0,this.selection.height=0,0===T.length){var e=new d.a.Geom.Rectangle(this.selection.x,this.selection.y,this.selection.width,this.selection.height);y(e)}B.spriteMouseDown=!1,B.sceneMouseDown=!1}}function y(e){var t=A.filter((function(t){var i=t.getBounds();return d.a.Geom.Rectangle.Overlaps(e,i)}));T=[];for(var i=0;i<t.length;i++)T.push(t[i]);x()}function x(){1===T.length&&(B.opacity=100*T[0].alpha,B.flipX=T[0].flipX,B.scale_Sprite=parseInt(100*T[0].scale))}this.input.on("pointerdown",h,this).on("pointermove",g,this).on("pointerup",m,this).on("pointerdownoutside",u,this).on("pointerupoutside",f,this),this.infos=this.add.text(10,10,"",{fontFamily:"Arial",fontSize:14,color:"#00bb00"}),this.canvas=this.add.graphics({lineStyle:{width:1,color:7845374,alpha:1}})},update:function(){if(this.canvas.clear(),null==this.designMode){this.designMode=!0;for(var e=0;e<G.length;e++)G[e].restart().seek(.01).pause();for(var t=0;t<C.length;t++)C[t].pause()}function i(e){var t=this;this.load.crossOrigin="anonymous",e=e.substring(0,e.lastIndexOf("_thumb.png"));var i=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("_")),n=e.substring(e.lastIndexOf("_")+1,e.length);e+=".png";var r=Number(n.substring(0,n.indexOf("x"))),s=Number(n.substring(n.indexOf("x")+1,n.length)),o=b();this.load.spritesheet(i,e,{frameWidth:r,frameHeight:s}),this.load.once("complete",(function(){C.push(t.anims.create({key:i+"_Animation",frames:t.anims.generateFrameNumbers(i),frameRate:12,repeat:-1})),k.items.push({GUID:o,id:i,x:200,y:100,tint:0,alpha:1,flipX:!1,scale:.5,tween:{x1:600,y1:100,duration:5e3,flipX:!0,yoyo:!0,repeat:-1}});var e=t.add.sprite(-200,-200).setScale(.5).setOrigin(.5).setFlipX(!1).setInteractive({draggable:!0}).on("pointerdown",(function(){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1})).on("pointerup",(function(){B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).on("dragstart",(function(){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1})).on("drag",(function(e){B.spriteDrag=!0,B.spriteMouseDown=!0,B.isDragHandleArrow=!1,this.x=parseInt(e.x),this.y=parseInt(e.y),k.items.filter((function(e){return e.GUID===o}))[0].x=parseInt(e.x),k.items.filter((function(e){return e.GUID===o}))[0].y=parseInt(e.y)})).on("dragend",(function(){B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).play(i+"_Animation");e.setDataEnabled(),e.data.set("id",i+"_9999"),e.GUID=o,A.push(e),G.push(t.tweens.add({GUID:o,targets:A.filter((function(e){return e.GUID===o}))[0],flipX:k.items.filter((function(e){return e.GUID===o}))[0].tween.flipX,yoyo:k.items.filter((function(e){return e.GUID===o}))[0].tween.yoyo,repeat:k.items.filter((function(e){return e.GUID===o}))[0].tween.repeat,props:{x:{value:{getStart:function(){return k.items.filter((function(e){return e.GUID===o}))[0].x},getEnd:function(){return k.items.filter((function(e){return e.GUID===o}))[0].tween.x1}},duration:k.items.filter((function(e){return e.GUID===o}))[0].tween.duration}},paused:!0}))}),this),this.load.start(),T.push(A[A.length-1]),this.input.on("pointermove",(function(e){if(B.overCanvas&&B.isDnD_FromToolBox){A[A.length-1].setPosition(e.x,e.y);var t=k.items[A.length-1];t.x=parseInt(e.x),t.y=parseInt(e.y),t.tween.x1=parseInt(e.x)+200,t.tween.y1=parseInt(e.y)}}))}if(X.length&&(i.call(this,X[0]),X=[]),B.debug){var n="",r=Math.floor(F/60),s=Math.floor(F-60*r);n+="elapsedTime: "+r+":"+s+"\n",n+="MouseX : "+I+" MouseY:"+S+"\n",n+="sprites[3] pointermove x: "+A[3].x+" y:"+A[3].y+"\n",n+="isDnD_FromToolBox: "+B.isDnD_FromToolBox+"\n",n+="overCanvas: "+B.overCanvas+"\n",n+="isTweening[3]: "+this.tweens.isTweening(A[3])+"\n",this.tweens.getTweensOf(A[3],!0)[0]&&(n+="tween[3] : Start="+this.tweens.getTweensOf(A[3],!0)[0].data[0].start+" End="+this.tweens.getTweensOf(A[3],!0)[0].data[0].end+"\n\n"),n+=(0|this.game.loop.actualFps)+"fps \n",n+="Nb Sprites: "+A.length+"\n",n+="designMode: "+B.designMode+"\n",n+="displayLayers: "+B.displayLayers+"\n",n+="sceneMouseDown: "+B.sceneMouseDown+"\n",n+="spriteMouseDown: "+B.spriteMouseDown+"\n",n+="spriteInSelection: "+B.spriteInSelection+"\n",n+="spriteDrag: "+B.spriteDrag+"\n",n+="isDragHandleArrow: "+B.isDragHandleArrow+"\n\n",n+="spritesSelected: \n";for(var o=0;o<T.length;o++)n+=T[o].data.get("id")+" || "+T[o].GUID+"\n";n+="clone_spritesSelected: \n";for(var a=0;a<O.length;a++)n+=O[a].data.get("id")+" || "+O[a].GUID+"\n";n+="isDragFromToolBox: "+JSON.stringify(X)+"\n",n+="\nspriteDragArrows: \n";for(var l=0;l<H.length;l++)n+=JSON.stringify(H[l].GUID)+"\n";this.infos.setText(n)}else this.infos.setText("");if(j){this.designMode=!1;for(var c=0;c<k.layers.length;c++)this.designMode?E[c].clearMask():E[c].setMask(R[c]);for(var p=0;p<k.items.length;p++){var u=k.items[p];this.designMode?A[p].setFrame(0).pause():A[p].play(u.id+"_Animation")}for(var f=0;f<G.length;f++)this.designMode?G[f].pause():G[f].restart();j=!1,this.scale.startFullscreen()}var h=this.canvas;if(B.designMode){for(var g=(Date.now()%600+1)/600,m=0;m<A.length;m++)if(m!=A.length-1||B.overCanvas||!B.isDnD_FromToolBox){var y=A[m].getBounds(),x=new d.a.Geom.Rectangle(y.x,y.y,y.width,y.height),v=[];if(d.a.Geom.Rectangle.Decompose(x,v),!1===T.includes(A[m])){h.lineStyle(2,7845374,1),h.fillStyle(7845374,1),h.strokeRectShape(y);for(var _=0;_<v.length;_++)h.lineStyle(2,7845374,1),h.fillRect(v[_].x-4,v[_].y-4,8,8),h.lineStyle(1,16777215,1),h.strokeRect(v[_].x-4,v[_].y-4,8,8)}else if(!B.spriteDrag){for(var P=[],U=0;U<v.length;U++)P.push({x:Number(v[U].x),y:Number(v[U].y)});h.lineStyle(2,0,1),h.fillStyle(0,1),w(h,P,0,0,0,8,4,g);for(var N=0;N<v.length;N++)h.lineStyle(2,0,1),h.fillStyle(0,1),h.fillRect(v[N].x-4,v[N].y-4,8,8),h.lineStyle(1,16777215,1),h.strokeRect(v[N].x-4,v[N].y-4,8,8)}}for(var z=0;z<G.length;z++)z==G.length-1&&!B.overCanvas&&B.isDnD_FromToolBox||(h.lineStyle(3,7845374),D(h,k.items[z].x,k.items[z].y,k.items[z].tween.x1,k.items[z].y),h.lineStyle(3,7845374),M(h,k.items[z].tween.x1,k.items[z].y,k.items[z].x,k.items[z].y,[15,5,5,5]));if(1===T.length){if(B.spriteDrag||0===H.length&&(-1!==L.indexOf(T[0].GUID)||0===H.length)){for(var V=0;V<H.length;V++)H[V].removeFromDisplayList(),H[V].removeInteractive();H=[],L=[];var q=k.items.filter((function(e){return e.GUID===T[0].GUID}))[0];L.push({GUID:T[0].GUID,x:Number(q.tween.x1),y:Number(q.y)});for(var W=0;W<L.length;W++){var $=this.add.sprite(L[W].x,L[W].y).setOrigin(.5).setInteractive({draggable:!0}).on("pointerdown",(function(){B.sceneMouseDown=!1,B.spriteDrag=!1,B.spriteMouseDown=!0,B.isDragHandleArrow=!0})).on("pointerup",(function(){B.sceneMouseDown=!1,B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).on("dragstart",(function(){B.sceneMouseDown=!1,B.spriteDrag=!1,B.spriteMouseDown=!0,B.isDragHandleArrow=!0})).on("drag",(function(e){B.sceneMouseDown=!1,B.spriteDrag=!1,B.spriteMouseDown=!0,B.isDragHandleArrow=!0,this.x=parseInt(e.x),this.y=parseInt(q.y),q.tween.x1=parseInt(e.x)})).on("dragend",(function(){B.sceneMouseDown=!1,B.spriteDrag=!1,B.spriteMouseDown=!1,B.isDragHandleArrow=!1})).play(this.dragArrowfixedResources);$.setDataEnabled(),$.data.set("GUID",T[0].GUID),$.GUID=T[0].GUID,$.data.set("id","dragArrowfixedResources"),H.push($)}}}else{for(var J=0;J<H.length;J++)H[J].removeFromDisplayList(),H[J].removeInteractive();H=[]}}else{for(var Y=0;Y<H.length;Y++)H[Y].removeFromDisplayList(),H[Y].removeInteractive();H=[]}},getVueInstance:function(){B=this},changeColor:function(e){for(var t=0;t<T.length;t++)A[A.indexOf(T[t])].setTintFill("0x"+e.hex.substring(1))},test:function(){}}}}},created:function(){this.game.scene.getVueInstance.call(this)},mounted:function(){},methods:{showToolTipPhaser:function(e){var t=this.$refs.pngFile[e].getBoundingClientRect().left-this.$refs.pngFile[e].getBoundingClientRect().width/2-10,i=this.$refs.pngFile[e].getBoundingClientRect().top-this.$refs.pngFile[e].getBoundingClientRect().height-110;0!==N.length&&N[0]===this.$refs.pngFile[e].id||N.push("assets/"+this.$refs.pngFile[e].id);var n=document.getElementById("TooltipPhaser");n.style.visibility="visible",n.style.position="absolute",n.style.left=t+"px",n.style.top=i+"px"},hideToolTipPhaser:function(){var e=document.getElementById("TooltipPhaser");e.style.visibility="hidden"},getPngFile:function(e){return"assets/"+e},toolbox_dragStart:function(e){this.isDnD_FromToolBox=!0,this.phaserDropped=!1,T=[],O=[],B.spriteDrag=!0,X.push(e)},moveOnCanvas:function(){this.overCanvas=!0,this.overCanvas&&this.isDnD_FromToolBox&&A[A.length-1].setVisible(!0)},leaveCanvas:function(){this.overCanvas=!1,this.isDnD_FromToolBox&&A[A.length-1].setVisible(!1)},toolbox_dragEnd:function(){this.phaserDropped||(k.items.pop(),G[G.length-1].stop(),A[A.length-1].removeFromDisplayList(),G.pop(),A.pop()),this.isDnD_FromToolBox=!1,B.spriteDrag=!1},PhaserDropped:function(){this.phaserDropped=!0},changeDesignMode:function(){this.designMode=!this.designMode,this.designMode?this.displayLayers=!0:this.displayLayers=!1;for(var e=0;e<k.layers.length;e++)P[e].setVisible(this.displayLayers),this.designMode?E[e].clearMask():E[e].setMask(R[e]);for(var t=0;t<k.items.length;t++)this.designMode&&A[t].setFlipX(k.items[t].flipX).setFrame(0);for(var i=0;i<C.length;i++)this.designMode?C[i].pause():C[i].resume();for(var n=0;n<G.length;n++)this.designMode?G[n].restart().seek(.01).pause():G[n].restart().resume()},DesignMode:function(){this.designMode=!0,this.displayLayers=!0},DebugMode:function(){this.debug=!this.debug},showLayers:function(){this.displayLayers=!this.displayLayers;for(var e=0;e<k.layers.length;e++)P[e].setVisible(this.displayLayers)},changeFullscreen:function(){j=!0},changeColor:function(e){this.game.scene.changeColor.call(this.game.scene,e)},opacityError:function(e,t){switch(e){case _.VALUE:break;case _.INTERVAL:break;case _.MIN:break;case _.MAX:break;case _.ORDER:break}this.opacityErrorMsg=t},setOpacity:function(){if(this.designMode){this.opacityErrorMsg="";for(var e=0;e<T.length;e++)k.items[A.indexOf(T[e])].alpha=this.opacity/100,A[A.indexOf(T[e])].setAlpha(this.opacity/100)}},setFlipX:function(){if(this.designMode)for(var e=0;e<T.length;e++)k.items[A.indexOf(T[e])].flipX=!A[A.indexOf(T[e])].flipX,A[A.indexOf(T[e])].setFlipX(!A[A.indexOf(T[e])].flipX)},test:function(){X.push("tree")},click_div:function(){},Recorder:function(e){var t=60,i=e.captureStream(t),n=new MediaRecorder(i),r="",s=[];n.ondataavailable=function(e){s.push(e.data)},n.onstop=function(){var e=new Blob(s,{type:"video/mp4"});s=[],r=URL.createObjectURL(e);var t=new FileReader;t.readAsDataURL(e),t.addEventListener("loadend",(function(e){document.getElementById("video").src=e.srcElement.result,document.getElementById("video").hidden=!0;var t=document.createElement("a");t.href=r,t.download=k.project,t.click()}))},n.ondataavailable=function(e){s.push(e.data)},this.start=function(){return n.start()},this.stop=function(){return n.stop()},this.pause=function(){return n.pause()},this.resume=function(){return n.resume()},this.getUrl=function(){return r}},initRecord:function(){var e=document.querySelector("#center-phaser > canvas"),t=new B.Recorder(e);setTimeout(t.start,60),setTimeout(t.stop,k.mp4_duration)}}},V=z,q=(i("cbf1"),i("2877")),W=Object(q["a"])(V,l,c,!1,null,null,null),$=W.exports,J={name:"app",components:{Archi2D:$}},Y=J,K=(i("38aa"),Object(q["a"])(Y,o,a,!1,null,null,null)),Q=K.exports;n["default"].use(s["b"]),n["default"].component("tippy",s["a"]),n["default"].config.productionTip=!1,n["default"].config.ignoredElements=[/ion-\w*/],Object(r["a"])(window),window.bus=new n["default"]({render:function(e){return e(Q)}}).$mount("#app")},"64d5":function(e,t,i){var n={"./ion-phaser.entry.js":["af4d","chunk-2d213e8b"]};function r(e){if(!i.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return i.e(t[1]).then((function(){return i(r)}))}r.keys=function(){return Object.keys(n)},r.id="64d5",e.exports=r},cbf1:function(e,t,i){"use strict";i("30ec")},f95a:function(e,t,i){}});
//# sourceMappingURL=app.abbe168a.js.map